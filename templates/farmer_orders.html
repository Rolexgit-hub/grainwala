{% extends "base.html" %}
{% block title %}Orders Received - Farmer Panel{% endblock %}

{% block content %}
<div class="container my-5">
  <h2 class="mb-4 text-success fw-bold d-flex align-items-center">
    <i class="bi bi-box-seam me-2"></i> ðŸ“¦ Orders Received
  </h2>

  {% if orders %}
  <div class="table-responsive shadow-lg rounded-4 bg-white p-4">
    <table class="table table-striped table-borderless align-middle text-center">
      <thead class="bg-success text-white rounded-top">
        <tr>
          <th style="width: 6%;">#ID</th>
          <th style="width: 12%;">Product</th>
          <th style="width: 6%;">Qty</th>
          <th style="width: 8%;">Price</th>
          <th style="width: 8%;">Total</th>
          <th style="width: 15%;">Buyer</th>
          <th style="width: 20%;">Address</th>
          <th style="width: 10%;">Buyer Phone</th>
          <th style="width: 10%;">Date</th>
          <th style="width: 8%;">Action</th>
        </tr>
      </thead>

      <tbody class="table-light">
        {% for o in orders %}
        <tr class="shadow-sm">
          <td class="fw-semibold text-secondary">{{ o.order_id }}</td>
          <td class="fw-semibold">{{ o.product_name }}</td>
          <td>{{ o.quantity }}</td>
          <td>â‚¹{{ o.price }}</td>
          <td class="fw-bold text-success">â‚¹{{ (o.price | float) * (o.quantity | int) }}</td>

          <td class="text-start">
            <strong>{{ o.buyer_name }}</strong><br>
          </td>

          <td class="text-start small">
            <i class="bi bi-geo-alt-fill text-danger"></i>
            {{ o.buyer_address }}, {{ o.city }}<br>
            {{ o.state }} - {{ o.pincode }}
          </td>

          <td class="fw-bold text-primary">
            <i class="bi bi-phone"></i> {{ o.buyer_phone }}
          </td>

          <td>
            {% if o.created_at %}
              <span class="text-muted small">
                <i class="bi bi-calendar-event"></i> {{ o.created_at.strftime('%d %b %Y %H:%M') }}
              </span>
            {% else %}
              -
            {% endif %}
          </td>

          <td>
            <a href="{{ url_for('farmer_order_detail', order_id=o.order_id) }}" 
              <i class="bi bi-eye"></i> View
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {% else %}
    <div class="alert alert-info shadow-sm text-center p-4 rounded-3">
      No orders have been received yet.
    </div>
  {% endif %}
</div>

<style>
/* âœ… Table overall look */
.table {
  border-collapse: separate;
  border-spacing: 0 0.75rem;
}

.table thead th {
  background-color: #198754 !important;
  color: white !important;
  font-weight: 600;
  vertical-align: middle;
}

.table tbody tr {
  background-color: #fff;
  border-radius: 12px;
  transition: all 0.2s ease-in-out;
}

.table tbody tr:hover {
  transform: scale(1.01);
  background-color: #f9fdfb;
  box-shadow: 0 3px 8px rgba(0,0,0,0.05);
}

.table td, .table th {
  padding: 1rem 1.2rem;
  vertical-align: middle;
}

.btn-success {
  background-color: #28a745 !important;
  border: none;
}

.btn-success:hover {
  background-color: #218838 !important;
}

.container {
  max-width: 1200px;
}
</style>
{% endblock %}
