{% extends "base.html" %}
{% block title %}Farmer Dashboard{% endblock %}

{% block content %}
<style>
 body {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e6f9e6;
  margin: 0;
}


 .dashboard-container {
  max-width: 400px;        
  max-height: 430px;      
  margin: 40px auto;
  background: #fff;
  padding: 18px;
  border-radius: 16px;
  box-shadow: 0 4px 24px rgba(44,62,80,0.10), 0 1.5px 6px rgba(0,0,0,0.08);
  display: flex;
  flex-direction: column;
  justify-content: center;
}

#profileForm {
  overflow-y: auto;       
  max-height: 270px;      
  padding-right: 6px;  
}


  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    border-bottom: 1px solid #e5e5e5;
    padding-bottom: 12px;
  }

  .dashboard-header h1 {
    font-size: 1.8em;
    font-weight: 700;
    color: #333;
    margin-right: 20px;  
  }

  .edit-btn {
    background: #1e40af;
    color: #fff;
    padding: 8px 16px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.95em;
    font-weight: 600;
    transition: background 0.2s;
  }

  .edit-btn:hover {
    background: #15307e;
  }

  .form-group {
    margin-bottom: 16px;
    text-align: left;
  }

  .form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 6px;
    color: #444;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background: #f8f8f8;
    font-size: 1em;
    transition: border 0.2s, background 0.2s;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    background: #fff;
    border: 1.5px solid #1e40af;
  }

  .form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
  }

  .save-btn {
    background: #28a745;
    color: #fff;
    padding: 10px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.2s;
  }

  .save-btn:hover {
    background: #218838;
  }

  .cancel-btn {
    background: #6c757d;
    color: #fff;
    padding: 10px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.2s;
  }

  .cancel-btn:hover {
    background: #5a6268;
  }

  .flash-message {
    margin-bottom: 16px;
    padding: 10px 14px;
    border-radius: 8px;
    font-weight: 500;
    text-align: center;
  }

  .flash-message.success {
    background: #d1fae5;
    color: #065f46;
  }

  .flash-message.error {
    background: #fee2e2;
    color: #991b1b;
  }
</style>

<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Farmer Profile</h1>
    <button id="editBtn" class="edit-btn" type="button">Edit</button>
  </div>

  <form method="POST" id="profileForm">
    <div class="form-group">
      <label>Farm / Shop Name</label>
      <input name="username" value="{{ user.username }}" readonly>
    </div>

    <div class="form-group">
      <label>Email</label>
      <input name="email" value="{{ user.email }}" readonly>
    </div>

    <div class="form-group">
      <label>Phone</label>
      <input name="phone" value="{{ user.phone }}" readonly>
    </div>

    <div class="form-group">
      <label>Location</label>
      <input name="location" value="{{ user.location }}" readonly>
    </div>

    <div class="form-group">
      <label>District</label>
      <input name="district" value="{{ user.district }}" readonly>
    </div>

    <div class="form-group">
      <label>State</label>
      <input name="state" value="{{ user.state }}" readonly>
    </div>

    <div class="form-group">
      <label>Pincode</label>
      <input name="pincode" value="{{ user.pincode }}" readonly>
    </div>

    <div class="form-group">
      <label>Crop Type</label>
      <input name="crop_type" value="{{ user.crop_type }}" readonly>
    </div>

    <div class="form-group">
      <label>Payment Details</label>
      <input name="payment_details" value="{{ user.payment_details }}" readonly>
    </div>

    <div class="form-actions hidden" id="formActions">
      <button class="save-btn">Save</button>
      <button type="button" id="cancelBtn" class="cancel-btn">Cancel</button>
    </div>
  </form>
</div>

<script>
  const editBtn = document.getElementById('editBtn');
  const cancelBtn = document.getElementById('cancelBtn');
  const form = document.getElementById('profileForm');
  const formActions = document.getElementById('formActions');
  const inputs = form.querySelectorAll('input, textarea');
  const originalValues = {};

  editBtn.addEventListener('click', () => {
    inputs.forEach(input => {
      originalValues[input.name] = input.value;
      input.removeAttribute('readonly');
      input.style.background = "#fff";
    });
    formActions.classList.remove('hidden');
    editBtn.classList.add('hidden');
  });

  cancelBtn.addEventListener('click', () => {
    inputs.forEach(input => {
      input.value = originalValues[input.name];
      input.setAttribute('readonly', true);
      input.style.background = "#f8f8f8";
    });
    formActions.classList.add('hidden');
    editBtn.classList.remove('hidden');
  });
</script>
{% endblock %}
